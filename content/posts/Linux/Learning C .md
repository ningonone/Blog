---
title: "Learning C"
date: 2023-02-01T09:37:28+08:00
draft: true
categories: 
- Linux
tags: 
- C
---

#### 结构体

***结构体变量的声明需要在主函数之上或者主函数中声明，如果在主函数之下则会报错***

**c语言中的结构体不能直接进行强制转换，只有结构体指针才能进行强制转换**

1. 定义与使用
2. 变量的初始化
3. 访问结构体成员
4. 结构体作为函数参数
5. 结构体数组
6. 指向结构体的指针
7. 获取结构体指针



#### 字符串赋值的方法

1. 直接初始化赋值

    ```c
    char Str[20] = "Hello world!" //Str是首地址，不能直接赋值给Str
    ```

2. strcpy函数进行赋值

    ```c
    char Str[20];
    strcpy(Str,"Hello world!"); //将一个字符串赋值给另一个字符串，只能使用strcpy函数
    ```


#### Typedef

```c
typedef oldName newName；

```


#### malloc

函数的用法和意义

malloc是动态内存分配函数，	用于申请一块连续的指定大小的内存块区域以void*类型返回分配的内存区域地址。

```c
extern void *malloc(unsigned int num_bytes);
L=(int *)malloc(sizeof(int));
free(L);
```

1. 首先malloc()函数返回的是void *类型，所以用的时候要进行强制类型转换
2. malloc函数用完后，记得使用free()函数来释放空间，不然只分配不释放会出问题
    例


#### int main(int argc,char* argv[ ])

* argc是命令行总的参数个数

* argv[]是argc个参数，其中第0个参数是程序的全名，以后的参数命令行后面跟的用户输入的参数

一般的main函数都是不带参数的。因此main 后的括号都是空括号。实际上，main函数可以带参数，这个参数可以认为是 main函数的形式参数。Ｃ语言规定main函数的参数只能有两个， 习惯上这两个参数写为argc和argv。因此，main函数的函数头可写为： main (argc,argv)Ｃ语言还规定argc(第一个形参)必须是整型变量,argv( 第二个形参)必须是指向字符串的指针数组。加上形参说明后，main函数的函数头应写为：

```c
int main (int argc,char *argv[])
```

由于main函数不能被其它函数调用， 因此不可能在程序内部取得实际值。那么，在何处把实参值赋予main函数的形参呢? 实际上,main函数的参数值是从操作系统命令行上获得的。当我们要运行一个可执行文件时，在DOS提示符下键入文件名，再输入实际参数即可把这些实参传送到main的形参中去。

```c
D:\tc2>test.exe myarg1 myarg2
//argc的值是3。也就是 命令名 加上两个参数，一共三个参数
```

==main 函数的返回值类型必须是 int== ，这样返回值才能传递给程序的激活者（如操作系统）。

操作系统将 main 作为程序入口，调用 main 函数来执行程序；main 函数执行其语句序列，并返回一个值给操作系统。在大多数系统中，main 函数的返回值用于说明程序的退出状态。当主函数正常结束时，得到的函数返回值为 0；当 main 函数在执行过程出现异常或者错误时，函数返回值为一个非 0 的数，代表程序异常退出。