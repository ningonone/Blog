---
title: "Camera Basic"
date: 2023-02-10T17:50:28+08:00
draft: false
categories: 
- Linux Bsp
tags: 
- MIPI
- Camera
---


### 摄像头的分类

摄像头可分为数字摄像头和模拟摄像头两大类。

数字摄像头可以将视频采集设备产生的模拟视频信号转换成数字信号，进而将其储存在计算机里。

模拟摄像头捕捉到的视频信号必须经过特定的视频捕捉卡将模拟信号转换成数字模式，并加以压缩后才可以转换到计算机上运用。

数字摄像头可以直接捕捉影像，然后通过串、并口或者USB接口传到计算机里。

### 摄像头结构

一般来说，camera 主要是由 lens 和 sensor IC 两部分组成，其中有的 sensor IC 集成 了 DSP，有的没有集成，但也需要外部 DSP 处理。细分的来讲，camera 设备由下边几部 分构成：

**lens（镜头）** 一般 camera 的镜头结构是有几片透镜组成，分有塑胶透镜（Plastic)和玻璃透镜(Glass) ，通常镜头结构有：1P,2P,1G1P,1G3P,2G2P,4G 等。

**sensor（图像传感器**）是一种半导体芯片，有两种类型：CCD（Charge Coupled Device）即电荷耦合器件的缩写 和 CMOS（Complementary Metal-Oxide Semiconductor）互补金属氧化物半导体。

sensor 将从 lens 上传导过来的光线转换为电信号， 再通过内部的 AD 转换为数字信号。 由于 sensor 的每个 pixel 只能感光 R 光或者 B 光或者 G 光， 因此每个像素此时存贮的是单色的， 我们称之为 RAW DATA 数据。

要想将每个像素的 RAW DATA 数据还原成三基色，就需要 ISP 来处理。**​ ISP（图像信号处理）** 主要完成数字图像的处理工作，把 sensor 采集到的原始数据转换为显示支持的格式。

**CAMIF（camera 控制器**） SoC芯片上的 camera 接口电路，对设备进行控制，接收 sensor 采集的数据并交给 CPU，送入 LCD 进行显示。  

{{< figure src="/images/blog/image-20230210173528-q6wyb6a.png" title="" >}}​​

### Camera接口分类

Camera接口实在多种多样，总的来说分为两大类：Parallel（并口）、Serial（串口）以及USB口。

图像传输接口主要分两种，并口 ITU 和串口 CSI。CSI 是 MIPI CSI 的简称，鉴于 MIPI CSI 的诸多优点，在手机相机领域，已经广泛使用 MIPI-CSI 接口传输图像数据和各种自定义数据。外置 ISP 一般包含 MIPI-CSIS 和 MIPI-CSIM 两个接口，内置 ISP 一般只需要 MIPI-CSIS 接口。  

### 相关术语

##### 常见图像格式

摄像头的数据格式通常有RAWRGB、YUV两种。YUV常见的有三种即YUV444，YUV422和YUV420。ADAS通常对色彩考虑不多，YUV420足够，除车载外一般多采用YUV422。

##### RGB格式

传统的红绿蓝格式，比如RGB565，RGB888，其16-bit数据格式为5-bit R + 6-bit G + 5-bit B，G多一位，原因是人眼对绿色比较敏感。

##### YUV格式

luma (Y) + chroma (UV) 格式。YUV是指亮度参量和色度参量分开表示的像素格式，而这样分开的好处就是不但可以避免相互干扰，还可以降低色度的采样率而不会对图像质量影响太大。YUV是一个比较笼统地说法，针对它的具体排列方式，可以分为很多种具体的格式。

色度(UV)定义了颜色的两个方面─色调与饱和度，分别用CB和CR表示。其中，Cr反映了RGB输入信号红色部分与RGB信号亮度值之间的差异，而Cb反映的是RGB输入信号蓝色部分与RGB信号亮度值之间的差异。主要的采样格式有YCbCr 4:2:0、YCbCr 4:2:2、YCbCr 4:1:1和 YCbCr 4:4:4。

##### RAW data格式

RAW图像就是CMOS或者CCD图像感应器将捕捉到的光源信号转化为数字信号的原始数据。RAW文件是一种记录了数码相机传感器的原始信息，同时记录了由相机拍摄所产生的一些元数据（Metadata，如ISO的设置、快门速度、光圈值、白平衡等）的文件。

RAW是未经处理、也未经压缩的格式，可以把RAW概念化为“原始图像编码数据”或更形象的称为“数字底片”。sensor的每一像素对应一个彩色滤光片，滤光片按Bayer pattern分布。将每一个像素的数据直接输出，即RAW RGB data。

##### 常见的摄像头传感器类型

主要有两种：一种是CCD传感器（Chagre Couled Device），即电荷耦合器，另一种是CMOS传感器（Complementary Metal-Oxide Semiconductor）即互补性金属氧化物半导体。

CCD的优势在于成像质量好，但是制造工艺复杂，成本高昂，且耗电高，在相同分辨率下，CMOS价格比CCD便宜，但图像质量相比CCD来说要低一些。CMOS影像传感器相对CCD具有耗电低的优势，加上随着工艺技术的进步，CMOS的画质水平也不断地在提高，所以目前市面上的手机摄像头都采用CMOS传感器。  

### 相关技术指标

##### 图像解析度/分辨率(Resolution)

SXGA(1280 x1024)又称130万像素  
XGA(1024 x768)又称80万像素  
SVGA(800 x600)又称50万像素  
VGA(640x480)又称30万像素(35万是指648X488)  
CIF(352x288) 又称10万像素  
SIF/QVGA(320x240)  
QCIF(176x144)  
QSIF/QQVGA(160x120)

##### 彩色深度(色彩位数)

256色灰阶，有256种灰色（包括黑白）。  
15或16位彩色（高彩色）：65,536种颜色。  
24位彩色（真彩色）：每种原色都有256个层次，它们的组合便有256*256*256种颜色。  
32位彩色：除了24位彩色的颜色外，额外的8位是储存重叠图层的图形资料(alpha频道)。

##### 光学变焦和数码变焦

光学变焦： 通过镜头的调整，拉近拉远所要拍摄的对象，保持像素不变和画质基本不变，却可以拍到自己理想的物像。

数码变焦：其实没有什么变焦，只是从原图片中截取出来放大，你从液晶屏幕上看到变大了，实际上画质并没有本质提高，而像素比你相机能拍摄的最大像素降低了， 画质上说基本是鸡肋吧，但是可以提供一些方便。

### ChatGTP的解答

##### 车载摄像头的工作原理是什么？

车载摄像头通常使用一个CCD或CMOS传感器来捕捉图像。当光线照射到传感器上时，它会转换为电信号，然后被放大和处理成有用的数字图像。该图像可以存储在内存卡中，并通过视频输出连接到显示器或其他设备上进行查看。

##### 那制式是什么意思?

"制式"指的是摄像头的规格和标准，通常包括录制图像的分辨率，视频帧率，视频格式，连接方式等。常见的视频制式包括PAL和NTSC，分别是欧洲和北美地区的标准。还有其他更新的视频制式，例如HDMI和SDI，提供了更高分辨率和更高质量的视频输出。

##### 制式总共有哪些？

视频制式有很多种，但常见的几种包括：

1. PAL（Phase Alternating Line）：这是欧洲和部分亚洲地区的视频制式。
2. NTSC（National Television System Committee）：这是北美和部分亚洲地区的视频制式。
3. SECAM（Séquentiel couleur à mémoire）：这是法国和部分欧洲地区的视频制式。
4. HDMI（High-Definition Multimedia Interface）：这是一种高清视频数字连接标准，可以传输高清视频和音频。
5. SDI（Serial Digital Interface）：这是一种专业级的数字视频连接标准，主要用于电视广播和影视制作。
6. HD-SDI（High-Definition Serial Digital Interface）：这是一种高清版本的SDI制式，提供更高的分辨率和更高的图像质量。

这只是制式的一些常见例子，实际上还有很多其他制式，取决于应用场景和需求。

##### 那AHD TVI CVI是什么？

AHD, TVI, CVI是三种数字视频传输技术，它们用于将高清视频从摄像头传输到显示器或其他设备上。

1. AHD（Analog High Definition）：这是一种高清模拟视频传输技术，可以在模拟视频系统中提供高清图像。
2. TVI（Turbo HD Video Interface）：这是一种高清数字视频传输技术，可以支持高分辨率和长传输距离。
3. CVI（Composite Video Interface）：这是一种高清数字视频传输技术，可以支持高分辨率和简单的安装和设置。

这三种技术都可以提供高清视频，但它们的特性和性能各不相同，因此需要根据应用场景和需求来选择适当的技术。

##### 视频制式跟这些有关系吗?

是的，视频制式与AHD, TVI, CVI相关。它们都是视频传输技术，但它们的工作原理和应用场景不同。

视频制式是指电视信号的传输标准，如PAL、NTSC等。它们定义了视频信号的制作、传输和接收的标准。

而AHD, TVI, CVI则是数字视频传输技术，它们提供了在数字视频系统中传输高清视频的方法。因此，它们与视频制式没有直接关系，但是它们都是视频信号传输的重要组成部分。

##### 传输标准和传输技术的区别是啥?

传输标准和传输技术是不同的概念，它们在视频信号传输中扮演着不同的角色。

传输标准（Transmission Standard）是指在传输视频信号时使用的一组固定的规则和规范。这些规则定义了信号的格式、分辨率、帧率、色彩等信息，使得信号可以被正确的接收和显示。例如，PAL和NTSC是两种视频制式，它们定义了电视信号的格式和传输规则。

传输技术（Transmission Technology）是指用来传输视频信号的技术。传输技术可以是有线或无线，并且可以使用不同的协议和标准，如Ethernet、Wi-Fi、ZigBee等。AHD、TVI、CVI是三种数字视频传输技术，它们提供了在数字视频系统中传输高清视频的方法。

因此，传输标准和传输技术是两个相互关联但不同的概念，它们共同参与视频信号的传输。

##### 车载摄像头的工作流程是什么？

车载摄像头的工作流程如下：

1. 拍摄视频：车载摄像头使用一个或多个镜头拍摄视频，并将图像信息转换为数字信号。
2. 压缩数据：将拍摄的数字信号进行压缩处理，以减少数据量，方便传输。
3. 传输数据：通过车载摄像头内部的传输线缆或无线技术（如Wi-Fi）将数据传输到接收端（如车载监控系统）。
4. 解压缩：接收端接收到数据后，将数据解压缩，得到原始的视频数据。
5. 显示：将解压后的视频数据通过显示器或其他设备进行显示，以供监控或录像使用。

因此，车载摄像头的工作流程为拍摄视频-压缩数据-传输数据-解压缩-显示。

##### 拍摄视频是用了CMOS传感器捕捉图像，将图像信息转换为数字信号吗

是的，拍摄视频通常是使用CMOS（Complementary Metal-Oxide-Semiconductor）传感器来捕捉图像，并将图像信息转换为数字信号。CMOS传感器是一种常见的图像传感器，它能够快速高效地捕捉图像，并且具有低功耗、低成本等优势。因此，它在车载摄像头的应用中得到了广泛使用

‍
